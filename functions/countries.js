const countries = [{"name":"Afghanistan","alpha3Code":"AFG","lowerName":"afghanistan"},{"name":"Åland Islands","alpha3Code":"ALA","lowerName":"åland islands"},{"name":"Albania","alpha3Code":"ALB","lowerName":"albania"},{"name":"Algeria","alpha3Code":"DZA","lowerName":"algeria"},{"name":"American Samoa","alpha3Code":"ASM","lowerName":"american samoa"},{"name":"Andorra","alpha3Code":"AND","lowerName":"andorra"},{"name":"Angola","alpha3Code":"AGO","lowerName":"angola"},{"name":"Anguilla","alpha3Code":"AIA","lowerName":"anguilla"},{"name":"Antarctica","alpha3Code":"ATA","lowerName":"antarctica"},{"name":"Antigua and Barbuda","alpha3Code":"ATG","lowerName":"antigua and barbuda"},{"name":"Argentina","alpha3Code":"ARG","lowerName":"argentina"},{"name":"Armenia","alpha3Code":"ARM","lowerName":"armenia"},{"name":"Aruba","alpha3Code":"ABW","lowerName":"aruba"},{"name":"Australia","alpha3Code":"AUS","lowerName":"australia"},{"name":"Austria","alpha3Code":"AUT","lowerName":"austria"},{"name":"Azerbaijan","alpha3Code":"AZE","lowerName":"azerbaijan"},{"name":"Bahamas","alpha3Code":"BHS","lowerName":"bahamas"},{"name":"Bahrain","alpha3Code":"BHR","lowerName":"bahrain"},{"name":"Bangladesh","alpha3Code":"BGD","lowerName":"bangladesh"},{"name":"Barbados","alpha3Code":"BRB","lowerName":"barbados"},{"name":"Belarus","alpha3Code":"BLR","lowerName":"belarus"},{"name":"Belgium","alpha3Code":"BEL","lowerName":"belgium"},{"name":"Belize","alpha3Code":"BLZ","lowerName":"belize"},{"name":"Benin","alpha3Code":"BEN","lowerName":"benin"},{"name":"Bermuda","alpha3Code":"BMU","lowerName":"bermuda"},{"name":"Bhutan","alpha3Code":"BTN","lowerName":"bhutan"},{"name":"Bolivia (Plurinational State of)","alpha3Code":"BOL","lowerName":"bolivia (plurinational state of)"},{"name":"Bonaire, Sint Eustatius and Saba","alpha3Code":"BES","lowerName":"bonaire, sint eustatius and saba"},{"name":"Bosnia and Herzegovina","alpha3Code":"BIH","lowerName":"bosnia and herzegovina"},{"name":"Botswana","alpha3Code":"BWA","lowerName":"botswana"},{"name":"Bouvet Island","alpha3Code":"BVT","lowerName":"bouvet island"},{"name":"Brazil","alpha3Code":"BRA","lowerName":"brazil"},{"name":"British Indian Ocean Territory","alpha3Code":"IOT","lowerName":"british indian ocean territory"},{"name":"United States Minor Outlying Islands","alpha3Code":"UMI","lowerName":"united states minor outlying islands"},{"name":"Virgin Islands (British)","alpha3Code":"VGB","lowerName":"virgin islands (british)"},{"name":"Virgin Islands (U.S.)","alpha3Code":"VIR","lowerName":"virgin islands (u.s.)"},{"name":"Brunei Darussalam","alpha3Code":"BRN","lowerName":"brunei darussalam"},{"name":"Bulgaria","alpha3Code":"BGR","lowerName":"bulgaria"},{"name":"Burkina Faso","alpha3Code":"BFA","lowerName":"burkina faso"},{"name":"Burundi","alpha3Code":"BDI","lowerName":"burundi"},{"name":"Cambodia","alpha3Code":"KHM","lowerName":"cambodia"},{"name":"Cameroon","alpha3Code":"CMR","lowerName":"cameroon"},{"name":"Canada","alpha3Code":"CAN","lowerName":"canada"},{"name":"Cabo Verde","alpha3Code":"CPV","lowerName":"cabo verde"},{"name":"Cayman Islands","alpha3Code":"CYM","lowerName":"cayman islands"},{"name":"Central African Republic","alpha3Code":"CAF","lowerName":"central african republic"},{"name":"Chad","alpha3Code":"TCD","lowerName":"chad"},{"name":"Chile","alpha3Code":"CHL","lowerName":"chile"},{"name":"China","alpha3Code":"CHN","lowerName":"china"},{"name":"Christmas Island","alpha3Code":"CXR","lowerName":"christmas island"},{"name":"Cocos (Keeling) Islands","alpha3Code":"CCK","lowerName":"cocos (keeling) islands"},{"name":"Colombia","alpha3Code":"COL","lowerName":"colombia"},{"name":"Comoros","alpha3Code":"COM","lowerName":"comoros"},{"name":"Congo","alpha3Code":"COG","lowerName":"congo"},{"name":"Congo (Democratic Republic of the)","alpha3Code":"COD","lowerName":"congo (democratic republic of the)"},{"name":"Cook Islands","alpha3Code":"COK","lowerName":"cook islands"},{"name":"Costa Rica","alpha3Code":"CRI","lowerName":"costa rica"},{"name":"Croatia","alpha3Code":"HRV","lowerName":"croatia"},{"name":"Cuba","alpha3Code":"CUB","lowerName":"cuba"},{"name":"Curaçao","alpha3Code":"CUW","lowerName":"curaçao"},{"name":"Cyprus","alpha3Code":"CYP","lowerName":"cyprus"},{"name":"Czech Republic","alpha3Code":"CZE","lowerName":"czech republic"},{"name":"Denmark","alpha3Code":"DNK","lowerName":"denmark"},{"name":"Djibouti","alpha3Code":"DJI","lowerName":"djibouti"},{"name":"Dominica","alpha3Code":"DMA","lowerName":"dominica"},{"name":"Dominican Republic","alpha3Code":"DOM","lowerName":"dominican republic"},{"name":"Ecuador","alpha3Code":"ECU","lowerName":"ecuador"},{"name":"Egypt","alpha3Code":"EGY","lowerName":"egypt"},{"name":"El Salvador","alpha3Code":"SLV","lowerName":"el salvador"},{"name":"Equatorial Guinea","alpha3Code":"GNQ","lowerName":"equatorial guinea"},{"name":"Eritrea","alpha3Code":"ERI","lowerName":"eritrea"},{"name":"Estonia","alpha3Code":"EST","lowerName":"estonia"},{"name":"Ethiopia","alpha3Code":"ETH","lowerName":"ethiopia"},{"name":"Falkland Islands (Malvinas)","alpha3Code":"FLK","lowerName":"falkland islands (malvinas)"},{"name":"Faroe Islands","alpha3Code":"FRO","lowerName":"faroe islands"},{"name":"Fiji","alpha3Code":"FJI","lowerName":"fiji"},{"name":"Finland","alpha3Code":"FIN","lowerName":"finland"},{"name":"France","alpha3Code":"FRA","lowerName":"france"},{"name":"French Guiana","alpha3Code":"GUF","lowerName":"french guiana"},{"name":"French Polynesia","alpha3Code":"PYF","lowerName":"french polynesia"},{"name":"French Southern Territories","alpha3Code":"ATF","lowerName":"french southern territories"},{"name":"Gabon","alpha3Code":"GAB","lowerName":"gabon"},{"name":"Gambia","alpha3Code":"GMB","lowerName":"gambia"},{"name":"Georgia","alpha3Code":"GEO","lowerName":"georgia"},{"name":"Germany","alpha3Code":"DEU","lowerName":"germany"},{"name":"Ghana","alpha3Code":"GHA","lowerName":"ghana"},{"name":"Gibraltar","alpha3Code":"GIB","lowerName":"gibraltar"},{"name":"Greece","alpha3Code":"GRC","lowerName":"greece"},{"name":"Greenland","alpha3Code":"GRL","lowerName":"greenland"},{"name":"Grenada","alpha3Code":"GRD","lowerName":"grenada"},{"name":"Guadeloupe","alpha3Code":"GLP","lowerName":"guadeloupe"},{"name":"Guam","alpha3Code":"GUM","lowerName":"guam"},{"name":"Guatemala","alpha3Code":"GTM","lowerName":"guatemala"},{"name":"Guernsey","alpha3Code":"GGY","lowerName":"guernsey"},{"name":"Guinea","alpha3Code":"GIN","lowerName":"guinea"},{"name":"Guinea-Bissau","alpha3Code":"GNB","lowerName":"guinea-bissau"},{"name":"Guyana","alpha3Code":"GUY","lowerName":"guyana"},{"name":"Haiti","alpha3Code":"HTI","lowerName":"haiti"},{"name":"Heard Island and McDonald Islands","alpha3Code":"HMD","lowerName":"heard island and mcdonald islands"},{"name":"Holy See","alpha3Code":"VAT","lowerName":"holy see"},{"name":"Honduras","alpha3Code":"HND","lowerName":"honduras"},{"name":"Hong Kong","alpha3Code":"HKG","lowerName":"hong kong"},{"name":"Hungary","alpha3Code":"HUN","lowerName":"hungary"},{"name":"Iceland","alpha3Code":"ISL","lowerName":"iceland"},{"name":"India","alpha3Code":"IND","lowerName":"india"},{"name":"Indonesia","alpha3Code":"IDN","lowerName":"indonesia"},{"name":"Côte d'Ivoire","alpha3Code":"CIV","lowerName":"côte d'ivoire"},{"name":"Iran (Islamic Republic of)","alpha3Code":"IRN","lowerName":"iran (islamic republic of)"},{"name":"Iraq","alpha3Code":"IRQ","lowerName":"iraq"},{"name":"Ireland","alpha3Code":"IRL","lowerName":"ireland"},{"name":"Isle of Man","alpha3Code":"IMN","lowerName":"isle of man"},{"name":"Israel","alpha3Code":"ISR","lowerName":"israel"},{"name":"Italy","alpha3Code":"ITA","lowerName":"italy"},{"name":"Jamaica","alpha3Code":"JAM","lowerName":"jamaica"},{"name":"Japan","alpha3Code":"JPN","lowerName":"japan"},{"name":"Jersey","alpha3Code":"JEY","lowerName":"jersey"},{"name":"Jordan","alpha3Code":"JOR","lowerName":"jordan"},{"name":"Kazakhstan","alpha3Code":"KAZ","lowerName":"kazakhstan"},{"name":"Kenya","alpha3Code":"KEN","lowerName":"kenya"},{"name":"Kiribati","alpha3Code":"KIR","lowerName":"kiribati"},{"name":"Kuwait","alpha3Code":"KWT","lowerName":"kuwait"},{"name":"Kyrgyzstan","alpha3Code":"KGZ","lowerName":"kyrgyzstan"},{"name":"Lao People's Democratic Republic","alpha3Code":"LAO","lowerName":"lao people's democratic republic"},{"name":"Latvia","alpha3Code":"LVA","lowerName":"latvia"},{"name":"Lebanon","alpha3Code":"LBN","lowerName":"lebanon"},{"name":"Lesotho","alpha3Code":"LSO","lowerName":"lesotho"},{"name":"Liberia","alpha3Code":"LBR","lowerName":"liberia"},{"name":"Libya","alpha3Code":"LBY","lowerName":"libya"},{"name":"Liechtenstein","alpha3Code":"LIE","lowerName":"liechtenstein"},{"name":"Lithuania","alpha3Code":"LTU","lowerName":"lithuania"},{"name":"Luxembourg","alpha3Code":"LUX","lowerName":"luxembourg"},{"name":"Macao","alpha3Code":"MAC","lowerName":"macao"},{"name":"Macedonia (the former Yugoslav Republic of)","alpha3Code":"MKD","lowerName":"macedonia (the former yugoslav republic of)"},{"name":"Madagascar","alpha3Code":"MDG","lowerName":"madagascar"},{"name":"Malawi","alpha3Code":"MWI","lowerName":"malawi"},{"name":"Malaysia","alpha3Code":"MYS","lowerName":"malaysia"},{"name":"Maldives","alpha3Code":"MDV","lowerName":"maldives"},{"name":"Mali","alpha3Code":"MLI","lowerName":"mali"},{"name":"Malta","alpha3Code":"MLT","lowerName":"malta"},{"name":"Marshall Islands","alpha3Code":"MHL","lowerName":"marshall islands"},{"name":"Martinique","alpha3Code":"MTQ","lowerName":"martinique"},{"name":"Mauritania","alpha3Code":"MRT","lowerName":"mauritania"},{"name":"Mauritius","alpha3Code":"MUS","lowerName":"mauritius"},{"name":"Mayotte","alpha3Code":"MYT","lowerName":"mayotte"},{"name":"Mexico","alpha3Code":"MEX","lowerName":"mexico"},{"name":"Micronesia (Federated States of)","alpha3Code":"FSM","lowerName":"micronesia (federated states of)"},{"name":"Moldova (Republic of)","alpha3Code":"MDA","lowerName":"moldova (republic of)"},{"name":"Monaco","alpha3Code":"MCO","lowerName":"monaco"},{"name":"Mongolia","alpha3Code":"MNG","lowerName":"mongolia"},{"name":"Montenegro","alpha3Code":"MNE","lowerName":"montenegro"},{"name":"Montserrat","alpha3Code":"MSR","lowerName":"montserrat"},{"name":"Morocco","alpha3Code":"MAR","lowerName":"morocco"},{"name":"Mozambique","alpha3Code":"MOZ","lowerName":"mozambique"},{"name":"Myanmar","alpha3Code":"MMR","lowerName":"myanmar"},{"name":"Namibia","alpha3Code":"NAM","lowerName":"namibia"},{"name":"Nauru","alpha3Code":"NRU","lowerName":"nauru"},{"name":"Nepal","alpha3Code":"NPL","lowerName":"nepal"},{"name":"Netherlands","alpha3Code":"NLD","lowerName":"netherlands"},{"name":"New Caledonia","alpha3Code":"NCL","lowerName":"new caledonia"},{"name":"New Zealand","alpha3Code":"NZL","lowerName":"new zealand"},{"name":"Nicaragua","alpha3Code":"NIC","lowerName":"nicaragua"},{"name":"Niger","alpha3Code":"NER","lowerName":"niger"},{"name":"Nigeria","alpha3Code":"NGA","lowerName":"nigeria"},{"name":"Niue","alpha3Code":"NIU","lowerName":"niue"},{"name":"Norfolk Island","alpha3Code":"NFK","lowerName":"norfolk island"},{"name":"Korea (Democratic People's Republic of)","alpha3Code":"PRK","lowerName":"korea (democratic people's republic of)"},{"name":"Northern Mariana Islands","alpha3Code":"MNP","lowerName":"northern mariana islands"},{"name":"Norway","alpha3Code":"NOR","lowerName":"norway"},{"name":"Oman","alpha3Code":"OMN","lowerName":"oman"},{"name":"Pakistan","alpha3Code":"PAK","lowerName":"pakistan"},{"name":"Palau","alpha3Code":"PLW","lowerName":"palau"},{"name":"Palestine, State of","alpha3Code":"PSE","lowerName":"palestine, state of"},{"name":"Panama","alpha3Code":"PAN","lowerName":"panama"},{"name":"Papua New Guinea","alpha3Code":"PNG","lowerName":"papua new guinea"},{"name":"Paraguay","alpha3Code":"PRY","lowerName":"paraguay"},{"name":"Peru","alpha3Code":"PER","lowerName":"peru"},{"name":"Philippines","alpha3Code":"PHL","lowerName":"philippines"},{"name":"Pitcairn","alpha3Code":"PCN","lowerName":"pitcairn"},{"name":"Poland","alpha3Code":"POL","lowerName":"poland"},{"name":"Portugal","alpha3Code":"PRT","lowerName":"portugal"},{"name":"Puerto Rico","alpha3Code":"PRI","lowerName":"puerto rico"},{"name":"Qatar","alpha3Code":"QAT","lowerName":"qatar"},{"name":"Republic of Kosovo","alpha3Code":"KOS","lowerName":"republic of kosovo"},{"name":"Réunion","alpha3Code":"REU","lowerName":"réunion"},{"name":"Romania","alpha3Code":"ROU","lowerName":"romania"},{"name":"Russian Federation","alpha3Code":"RUS","lowerName":"russian federation"},{"name":"Rwanda","alpha3Code":"RWA","lowerName":"rwanda"},{"name":"Saint Barthélemy","alpha3Code":"BLM","lowerName":"saint barthélemy"},{"name":"Saint Helena, Ascension and Tristan da Cunha","alpha3Code":"SHN","lowerName":"saint helena, ascension and tristan da cunha"},{"name":"Saint Kitts and Nevis","alpha3Code":"KNA","lowerName":"saint kitts and nevis"},{"name":"Saint Lucia","alpha3Code":"LCA","lowerName":"saint lucia"},{"name":"Saint Martin (French part)","alpha3Code":"MAF","lowerName":"saint martin (french part)"},{"name":"Saint Pierre and Miquelon","alpha3Code":"SPM","lowerName":"saint pierre and miquelon"},{"name":"Saint Vincent and the Grenadines","alpha3Code":"VCT","lowerName":"saint vincent and the grenadines"},{"name":"Samoa","alpha3Code":"WSM","lowerName":"samoa"},{"name":"San Marino","alpha3Code":"SMR","lowerName":"san marino"},{"name":"Sao Tome and Principe","alpha3Code":"STP","lowerName":"sao tome and principe"},{"name":"Saudi Arabia","alpha3Code":"SAU","lowerName":"saudi arabia"},{"name":"Senegal","alpha3Code":"SEN","lowerName":"senegal"},{"name":"Serbia","alpha3Code":"SRB","lowerName":"serbia"},{"name":"Seychelles","alpha3Code":"SYC","lowerName":"seychelles"},{"name":"Sierra Leone","alpha3Code":"SLE","lowerName":"sierra leone"},{"name":"Singapore","alpha3Code":"SGP","lowerName":"singapore"},{"name":"Sint Maarten (Dutch part)","alpha3Code":"SXM","lowerName":"sint maarten (dutch part)"},{"name":"Slovakia","alpha3Code":"SVK","lowerName":"slovakia"},{"name":"Slovenia","alpha3Code":"SVN","lowerName":"slovenia"},{"name":"Solomon Islands","alpha3Code":"SLB","lowerName":"solomon islands"},{"name":"Somalia","alpha3Code":"SOM","lowerName":"somalia"},{"name":"South Africa","alpha3Code":"ZAF","lowerName":"south africa"},{"name":"South Georgia and the South Sandwich Islands","alpha3Code":"SGS","lowerName":"south georgia and the south sandwich islands"},{"name":"Korea (Republic of)","alpha3Code":"KOR","lowerName":"korea (republic of)"},{"name":"South Sudan","alpha3Code":"SSD","lowerName":"south sudan"},{"name":"Spain","alpha3Code":"ESP","lowerName":"spain"},{"name":"Sri Lanka","alpha3Code":"LKA","lowerName":"sri lanka"},{"name":"Sudan","alpha3Code":"SDN","lowerName":"sudan"},{"name":"Suriname","alpha3Code":"SUR","lowerName":"suriname"},{"name":"Svalbard and Jan Mayen","alpha3Code":"SJM","lowerName":"svalbard and jan mayen"},{"name":"Swaziland","alpha3Code":"SWZ","lowerName":"swaziland"},{"name":"Sweden","alpha3Code":"SWE","lowerName":"sweden"},{"name":"Switzerland","alpha3Code":"CHE","lowerName":"switzerland"},{"name":"Syrian Arab Republic","alpha3Code":"SYR","lowerName":"syrian arab republic"},{"name":"Taiwan","alpha3Code":"TWN","lowerName":"taiwan"},{"name":"Tajikistan","alpha3Code":"TJK","lowerName":"tajikistan"},{"name":"Tanzania, United Republic of","alpha3Code":"TZA","lowerName":"tanzania, united republic of"},{"name":"Thailand","alpha3Code":"THA","lowerName":"thailand"},{"name":"Timor-Leste","alpha3Code":"TLS","lowerName":"timor-leste"},{"name":"Togo","alpha3Code":"TGO","lowerName":"togo"},{"name":"Tokelau","alpha3Code":"TKL","lowerName":"tokelau"},{"name":"Tonga","alpha3Code":"TON","lowerName":"tonga"},{"name":"Trinidad and Tobago","alpha3Code":"TTO","lowerName":"trinidad and tobago"},{"name":"Tunisia","alpha3Code":"TUN","lowerName":"tunisia"},{"name":"Turkey","alpha3Code":"TUR","lowerName":"turkey"},{"name":"Turkmenistan","alpha3Code":"TKM","lowerName":"turkmenistan"},{"name":"Turks and Caicos Islands","alpha3Code":"TCA","lowerName":"turks and caicos islands"},{"name":"Tuvalu","alpha3Code":"TUV","lowerName":"tuvalu"},{"name":"Uganda","alpha3Code":"UGA","lowerName":"uganda"},{"name":"Ukraine","alpha3Code":"UKR","lowerName":"ukraine"},{"name":"United Arab Emirates","alpha3Code":"ARE","lowerName":"united arab emirates"},{"name":"United Kingdom of Great Britain and Northern Ireland","alpha3Code":"GBR","lowerName":"united kingdom of great britain and northern ireland"},{"name":"United States of America","alpha3Code":"USA","lowerName":"united states of america"},{"name":"Uruguay","alpha3Code":"URY","lowerName":"uruguay"},{"name":"Uzbekistan","alpha3Code":"UZB","lowerName":"uzbekistan"},{"name":"Vanuatu","alpha3Code":"VUT","lowerName":"vanuatu"},{"name":"Venezuela (Bolivarian Republic of)","alpha3Code":"VEN","lowerName":"venezuela (bolivarian republic of)"},{"name":"Viet Nam","alpha3Code":"VNM","lowerName":"viet nam"},{"name":"Wallis and Futuna","alpha3Code":"WLF","lowerName":"wallis and futuna"},{"name":"Western Sahara","alpha3Code":"ESH","lowerName":"western sahara"},{"name":"Yemen","alpha3Code":"YEM","lowerName":"yemen"},{"name":"Zambia","alpha3Code":"ZMB","lowerName":"zambia"},{"name":"Zimbabwe","alpha3Code":"ZWE","lowerName":"zimbabwe"}];

function filter(query) {
  const value = query.toLowerCase();

  return countries.filter(v => v.lowerName.includes(value));
}

function handler(event, context, callback) {
  const q = event.queryStringParameters.query;

  if (typeof q !== "string" || q.length === 0) {
    callback(null, {
      statusCode: 400,
      body: "Invalid/missing query parameter"
    });
  }

  const result = filter(q);

  callback(null, {
    statusCode: 200,
    headers: {
        "content-type": "application/json"
    },
    body: JSON.stringify(result)
  });
}

exports.handler = handler;
